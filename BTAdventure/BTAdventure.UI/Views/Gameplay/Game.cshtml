@model BTAdventure.UI.Models.GameSceneVM
@{
    ViewBag.Title = "Game";
}

<div class="container">
    <div class="col-lg-12">
        <div class="" id="hiddenStats">
            @*<h1>@Model.EventChoice.EventChoiceId this is the event choice ID!!!</h1>
                <h2>@Model.EventChoice.SceneId this is the scene id </h2>
                @*<div class="card-body, col-md-6" style="align-content:center;"><p>@Model.EventChoice.EventChoiceId -- current event choice id</p></div>
                <div class="card-body, col-md-6" style="align-content:center;"><p>@Model.EventChoice.PositiveButton -- current event choice positive button</p></div>
                <div class="card-body, col-md-6" style="align-content:center;"><p>@Model.EventChoice.PositiveRoute -- current event choice positive route</p></div>
                <div class="card-body, col-md-6" style="align-content:center;"><p>@Model.EventChoice.PositiveText -- current event choice positive text</p></div>
                <div class="card-body, col-md-6" style="align-content:center;"><p>@Model.EventChoice.NegativeButton -- current event choice negative button</p></div>
                <div class="card-body, col-md-6" style="align-content:center;"><p>@Model.EventChoice.NegativeRoute -- current event choice negative route</p></div>
                <div class="card-body, col-md-6" style="align-content:center;"><p>@Model.EventChoice.NegativeText -- current event choice negative text</p></div>*@
            @*<div class="card-body, col-md-6" style="align-content:center;"><p class="allData"></p></div>
                <br /> <br /> <br /> <br />*@

            <div id="negativeText" hidden><p id="negativeParagraph"></p><button class="btn btn-primary" id="negativeContinue"></button></div>
        </div>
    </div>
</div>


<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <img class="gameImage" alt="storyPicture" src="https://vignette.wikia.nocookie.net/assassinscreed/images/8/88/DVD-Knight.png/revision/latest?cb=20120629122150" />
            <div class="row">
                <div class="col-md-12">
                    <input type="hidden" id="characterId" value="@Model.PlayerCharacter.CharacterId">
                    <input type="hidden" id="eventChoiceId" value="@Model.EventChoice.EventChoiceId">
                    <div id="startText">@Model.EventChoice.StartText</div>
                    <div id="positiveText"><p id="positiveParagraph">@Model.EventChoice.PositiveText</p><button class="btn btn-primary" id="positiveContinue">Continue</button></div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <button type="button" id="positiveButton" class="btn btn-outline-success" onclick="GetNextSceneEvent()">@Model.EventChoice.PositiveButton</button>
                </div>

                <div class="col-md-6">
                    <button type="button" id="negativeButton" class="btn btn-outline-danger" onclick="GetNextSceneEvent()">@Model.EventChoice.NegativeButton</button>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
    //function GetNextSceneEvent(eventChoiceId, route, sceneRoute) {
    //    //alert(route)
    //    $.ajax({
    //        type: 'GET',
    //        url: 'http://localhost:49340/api/choice/' + eventChoiceId + '/' + route + '/' + sceneRoute, //NEED TO UPDATE THE EVENTCHOICE ID
    //        headers: {
    //            'Accept': 'application/json',
    //            'Content-Type': 'application/json'
    //        },
    //        success: function (data, status) {
    //            //add something like, if positive was clicked, unhide the h1 for positive text, or better yet make a modal.
    //            document.getElementById("positiveButton").innerText = '' + data.PositiveButton + '';
    //            document.getElementById("negativeButton").innerText = '' + data.NegativeButton + '';
    //            document.getElementById("startText").innerText = '' + data.StartText + '';
    //            //needed to make the buttons onclicks update, ie.. remove VM and use json data
    //            document.getElementById("positiveButton").setAttribute("onclick", "GetNextSceneEvent(" + data.EventChoiceId + "," + data.PositiveRoute + "," + data.PositiveSceneRoute + ")");
    //            document.getElementById("negativeButton").setAttribute("onclick", "GetNextSceneEvent(" + data.EventChoiceId + "," + data.NegativeRoute + "," + data.NegativeSceneRoute + ")");
    //        },
    //        error: function (xhr, status, err) {
    //            console.log(xhr, status, err);
    //        }
    //    });
    //}
    var baseUrl = "http://localhost:49340/api/game/";


    function xhrFail(xhr, status, err) {
        console.log(xhr, status, err);
    }

    //function GetNextSceneEvent(eventChoiceId, route, sceneRoute) {
    //    $.ajax({
    //        type: 'POST',
    //        url: 'http://localhost:49340/api/choice/'
    //        headers: {
    //            'Accept': 'application/json',
    //            'Content-Type': 'application/json'
    //        },
    //        success: function (data, status) {
    //            //add something like, if positive was clicked, unhide the h1 for positive text, or better yet make a modal.

    //        },
    //        error: function (xhr, status, err) {
    //            console.log(xhr, status, err);
    //        }
    //    });
    //}

    $("#positiveContinue").click(function () {

        var choiceObject = {
            CharacterId: $("#characterId").val(),
            EventChoiceId: $("#eventChoiceId").val(),
            PositiveOrNegative: true
        };
        var url = baseUrl;
        var type = "POST";


        $.ajax({
            url: url,
            type: type,

            data: JSON.stringify(choiceObject),
            contentType: "application/json"
        }).done(function (data, status) {
            document.getElementById("startText").innerText = '' + data.StartText + '';
            document.getElementById("positiveButton").innerText = '' + data.PositiveButton + '';
            document.getElementById("negativeButton").innerText = '' + data.NegativeButton + '';
            document.getElementById("positiveParagraph").innerText = '' + data.PositiveText + '';

        }).fail(xhrFail);
    });





    function ShowHiddenStats() {
        $("hiddenStats").toggleClass('hidden');
    }

</script>

